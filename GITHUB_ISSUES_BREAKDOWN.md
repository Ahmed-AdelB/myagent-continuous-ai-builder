# GitHub Issues Breakdown - Tri-Agent SDLC Enhancement
**Generated by**: Codex (GPT-5.1-Codex-Max) + Gemini (2.5 Pro)
**Date**: 2025-11-20
**Total Issues**: 23 across 3 sprints

---

## üìä Summary

| Sprint | Issues | Effort | Focus |
|--------|--------|--------|-------|
| **Sprint 1** | 11 | 10 M + 3 L | RAG + Foundation |
| **Sprint 2** | 7 | 4 M + 3 L | Gap Analysis + Routing + Validation |
| **Sprint 3** | 5 | 3 M + 1 L + 1 S | First Improvement Cycle + Safety |

**Total Estimated Effort**: 23 M-L issues (approx. 4-6 weeks with 3-agent team)

---

## üéØ SPRINT 1: RAG + Foundation (11 Issues)

### Issue #1: Define RAG Architecture & Corpus Specification
- **Priority**: CRITICAL
- **Type**: Documentation
- **Effort**: M (Medium)
- **Dependencies**: None

**Description**:
Produce a concrete RAG spec covering corpus scope (code/docs/tests), chunking rules (AST + semantic, max token budget), embeddings model choice, vector store config, metadata schema, and retrieval parameters (k, filters). Include evaluation plan (precision@k, latency targets) and offline corpora fallback for restricted network.

**Acceptance Criteria**:
- [ ] Spec merged in docs with diagrams
- [ ] Corpus+chunking rules enumerated
- [ ] Embedding/vector store choices justified
- [ ] Evaluation metrics/SLAs defined
- [ ] Offline mode documented

---

### Issue #2: Implement `core/knowledge/rag_retriever.py`
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: L (Large)
- **Dependencies**: #1

**Description**:
Build RAGRetriever with AST-aware chunking, deterministic chunk IDs, embedding + Chroma (or pluggable) storage, metadata tagging (path, type, lines, hash), and query API to return ranked snippets. Include cost/latency logging hooks.

**Acceptance Criteria**:
- [ ] Module implemented with unit tests covering chunking, deduplication, query ranking, and failure paths
- [ ] Configurable k/filters
- [ ] JSON logging of latency and cost per query
- [ ] Code coverage > 90%

**Implementation Notes** (from Gemini):
- Use `tree-sitter` and `tree-sitter-python` for AST parsing
- Use `sentence-transformers` for embeddings
- Store in ChromaDB with metadata

---

### Issue #3: RAG Ingestion Pipeline (CI Job)
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: M
- **Dependencies**: #2

**Description**:
Add CLI/CI job to index the codebase nightly/on-demand using RAGRetriever. Handles incremental updates via file hashes, outputs snapshot metadata (version, timestamp, counts), and fails fast on missing embeddings. Supports offline mode using cached embeddings.

**Acceptance Criteria**:
- [ ] CLI command documented
- [ ] CI job yaml drafted
- [ ] Incremental indexing demonstrated in tests
- [ ] Snapshot artifact generated and stored
- [ ] Offline flag tested

---

### Issue #4: RAG Evaluation Suite
- **Priority**: HIGH
- **Type**: Testing
- **Effort**: M
- **Dependencies**: #2, #3

**Description**:
Create deterministic test corpus + benchmarks for retrieval quality and performance. Includes golden queries, expected file hits, precision@k targets, latency budget, and mutation/property-based checks for reproducibility.

**Acceptance Criteria**:
- [ ] Tests runnable via `pytest`
- [ ] Seeds fixed for reproducibility
- [ ] Thresholds enforced (precision@k, p95 latency)
- [ ] CI gate added
- [ ] Failure output is actionable

---

### Issue #5: Integrate RAG into CodebaseAnalyzer
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: L
- **Dependencies**: #3, #4

**Description**:
Wire CodebaseAnalyzer to use RAGRetriever for targeted queries (architecture, security, patterns), replacing 1M token reads. Generate RAG-backed `CODEBASE_INVENTORY.json` and Mermaid diagrams.

**Acceptance Criteria**:
- [ ] Analyzer uses RAG (no giant context loads)
- [ ] Inventory JSON generated in local run
- [ ] Mermaid diagrams produced
- [ ] Smoke test passes
- [ ] Logs include retrieved snippets count and token usage

---

### Issue #6: Conflict Resolution Protocol & Lead-Agent Tie-Breaker
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: M
- **Dependencies**: None

**Description**:
Implement ConflictResolver with lead-agent ownership, quorum/timeout rules, human escalation path, and audit trail. Expose metrics (conflict rate, resolution time).

**Acceptance Criteria**:
- [ ] Code merged
- [ ] Unit tests for quorum/timeout/escalation
- [ ] Audit log persisted
- [ ] Metrics emitted
- [ ] Documented runbook for human escalation

**Lead Agent Rules**:
```python
LEAD_AGENT_BY_DOMAIN = {
    "architecture": "claude",
    "implementation": "codex",
    "security": "gemini",
    "performance": "codex",
    "integration": "claude",
    "testing": "codex",
    "compliance": "gemini",
    "deployment": "claude"
}
```

---

### Issue #7: Task Ledger & Orchestration Hardening
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: L
- **Dependencies**: #6

**Description**:
Add durable task ledger with states (queued/running/retry/blocked/done), retry + jitter, timeouts, cancellation, and circuit breakers for routing. Include dependency tracking to avoid deadlocks.

**Acceptance Criteria**:
- [ ] Ledger data model implemented
- [ ] API covers CRUD + dependency graph
- [ ] Tests for retries/backoff/timeout
- [ ] Circuit breaker toggles routing
- [ ] JSON logs for state transitions

---

### Issue #8: GeminiSession Wrapper: Persistence & Redaction
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: M
- **Dependencies**: #7

**Description**:
Implement session wrapper with persistent history, key rotation, PII/secrets redaction, and configurable retention. Provide hooks for routing to prefer session continuity.

**Acceptance Criteria**:
- [ ] Wrapper in code
- [ ] Tests for history resume, redaction, and key rotation
- [ ] Config documented
- [ ] Logging avoids sensitive data

**Reference**: See `gemini_session_test.py` for working prototype

---

### Issue #9: Security & Supply Chain Baseline
- **Priority**: HIGH
- **Type**: Chore
- **Effort**: M
- **Dependencies**: None

**Description**:
Pin dependencies, add SBOM generation, enable vulnerability + secret scanning (trivy/gitleaks), and add pre-commit hooks. Document network/offline scan fallback.

**Acceptance Criteria**:
- [ ] SBOM produced in CI
- [ ] Scans run in CI with fail criteria
- [ ] Dependency pins updated
- [ ] Offline scan instructions documented

**Tools to integrate**:
- SBOM: `cyclonedx-bom`, `syft`
- Vuln scanning: `trivy`
- Secret scanning: `gitleaks`
- Infra scanning: `kics` (for K8s/Docker)
- Pre-commit: `ruff`, `mypy`, `bandit`

---

### Issue #10: Run Phase 0 Research & Produce RESEARCH_SYNTHESIS.json
- **Priority**: MEDIUM
- **Type**: Documentation
- **Effort**: M
- **Dependencies**: #9, #8

**Description**:
Execute autonomous research (with network-safe constraints), consolidate into RESEARCH_SYNTHESIS.json and individual agent reports, citing sources and tagging topic coverage.

**Acceptance Criteria**:
- [ ] JSON and markdown reports generated
- [ ] Citations included
- [ ] Coverage of all listed topics (OWASP 2025, CWE/SANS, K8s 1.30+, CI/CD, testing, IaC, observability)
- [ ] Stored in repo
- [ ] Summary note linked in README/START_HERE

**Research Topics**:
1. OWASP 2025 Security Standards
2. CWE/SANS Top 25 Software Weaknesses
3. Kubernetes 1.30+ Production Patterns
4. Modern CI/CD (2025)
5. Testing Strategies (property-based, mutation, contract, chaos)
6. Infrastructure as Code (IaC)
7. Observability & Monitoring

---

### Issue #11: RAG-Based Codebase Inventory Generation
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: M
- **Dependencies**: #5

**Description**:
Run RAG-backed analysis to produce `CODEBASE_INVENTORY.json` with architecture, security hotspots, and component metadata; verify outputs stored and repeatable.

**Acceptance Criteria**:
- [ ] Inventory JSON generated via documented command
- [ ] Outputs validated against sample queries
- [ ] Artifacts archived
- [ ] Links added to docs

**Output Format**:
```json
{
  "analysis_date": "2025-11-20",
  "total_files": 245,
  "total_lines": 45000,
  "architecture": {
    "components": [...],
    "dependencies": [...],
    "diagrams": ["architecture.mmd", "component.mmd"]
  },
  "security_hotspots": [...],
  "quality_metrics": {...}
}
```

---

## üîÑ SPRINT 2: Gap Analysis + Routing + Validation (7 Issues)

### Issue #12: GapAnalyzer Implementation
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: M
- **Dependencies**: #11

**Description**: Implement GapAnalyzer with consensus scoring and parallel agent runs

**Acceptance Criteria**:
- [ ] Multi-agent gap analysis working
- [ ] Consensus scoring implemented
- [ ] GAPS_ANALYSIS.json generated

---

### Issue #13: Enhanced Router with Multi-Signal Fitness
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: L
- **Dependencies**: #7

**Description**: Build EnhancedRouter with capability + cost + latency + load + historical win-rate

**Acceptance Criteria**:
- [ ] Multi-dimensional routing working
- [ ] Historical success tracking
- [ ] Load balancing functional

---

### Issue #14: Validation Pipeline (4-Layer)
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: L
- **Dependencies**: #13

**Description**: Implement 4-layer validation (self-check + peer + tests + static analysis) with 0-1 scoring

**Acceptance Criteria**:
- [ ] All 4 layers implemented
- [ ] Scoring system working (0.0-1.0)
- [ ] Quality gates enforced (>0.85 required)

---

### Issue #15: CI Testing Gates
- **Priority**: HIGH
- **Type**: Testing
- **Effort**: M
- **Dependencies**: #14

**Description**: Codify CI stages: pre-commit ‚Üí PR ‚Üí nightly ‚Üí chaos

**Acceptance Criteria**:
- [ ] Pre-commit hooks: fmt, ruff, mypy, bandit, gitleaks
- [ ] PR CI: unit + contracts + baseline perf
- [ ] Nightly: mutation + property fuzz
- [ ] Weekly: chaos + load

---

### Issue #16: Security/Supply Chain Expansion
- **Priority**: HIGH
- **Type**: Chore
- **Effort**: M
- **Dependencies**: #9

**Description**: Add policy-as-code and infrastructure scans

**Acceptance Criteria**:
- [ ] Policy enforcement (OPA)
- [ ] K8s manifest scanning (kics)
- [ ] Docker image scanning (trivy)

---

### Issue #17: Observability Foundations
- **Priority**: CRITICAL
- **Type**: Feature
- **Effort**: L
- **Dependencies**: #7

**Description**: Add structured JSON logs, traces (OpenTelemetry), metrics, SLOs

**Acceptance Criteria**:
- [ ] JSON logging for all agents
- [ ] Trace spans for tasks
- [ ] Metrics: latency, success rate, queue depth, cost
- [ ] SLOs with alerting

---

### Issue #18: Data Governance Controls
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: M
- **Dependencies**: #3, #17

**Description**: Implement redaction, retention, dataset versioning for RAG

**Acceptance Criteria**:
- [ ] PII/secrets redaction
- [ ] Retention policies
- [ ] RAG dataset versioning
- [ ] Access controls

---

## üöÄ SPRINT 3: First Improvement Cycle + Safety (5 Issues)

### Issue #19: Execute Gap Remediation Cycle #1
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: L
- **Dependencies**: #12

**Description**: Fix top gaps from GAPS_ANALYSIS.json

---

### Issue #20: Feature Flags & Rollback Plan
- **Priority**: HIGH
- **Type**: Feature
- **Effort**: M
- **Dependencies**: #7

**Description**: Add feature flags and rollback mechanisms for agent-driven changes

---

### Issue #21: Non-Functional Test Suite
- **Priority**: MEDIUM
- **Type**: Testing
- **Effort**: M
- **Dependencies**: #15

**Description**: Add performance, load, and latency budget tests

---

### Issue #22: Routing Optimization via Outcomes
- **Priority**: MEDIUM
- **Type**: Enhancement
- **Effort**: M
- **Dependencies**: #13, #17

**Description**: Implement feedback loop to adjust routing weights based on outcomes

---

### Issue #23: SDLC Completion Report
- **Priority**: MEDIUM
- **Type**: Documentation
- **Effort**: S (Small)
- **Dependencies**: All prior sprint deliverables

**Description**: Generate SDLC_COMPLETION_REPORT.md with executive-ready metrics

---

## üìã Implementation Order (Dependency-Sorted)

### Phase 1: Foundation (Parallel)
- #1: RAG Architecture Spec
- #6: Conflict Resolution Protocol
- #9: Security Baseline

### Phase 2: RAG Core
- #2: RAGRetriever Implementation ‚Üí #3: Ingestion Pipeline ‚Üí #4: Evaluation Suite

### Phase 3: Integration
- #5: CodebaseAnalyzer Integration
- #7: Task Ledger (depends on #6)

### Phase 4: Execution
- #8: GeminiSession Wrapper (depends on #7)
- #10: Phase 0 Research (depends on #8, #9)
- #11: Codebase Inventory (depends on #5)

### Phase 5: Sprint 2 (After Sprint 1 complete)
- #12-#18

### Phase 6: Sprint 3 (After Sprint 2 complete)
- #19-#23

---

## üè∑Ô∏è Label Taxonomy

### Priority
- `priority:critical` - Must have for system to work
- `priority:high` - Important for production readiness
- `priority:medium` - Valuable but can be deferred
- `priority:low` - Nice to have

### Type
- `type:feature` - New functionality
- `type:documentation` - Docs, specs, guides
- `type:testing` - Test infrastructure
- `type:chore` - Maintenance, tooling
- `type:enhancement` - Improvement to existing feature

### Sprint
- `sprint:1` - RAG + Foundation
- `sprint:2` - Gap Analysis + Routing + Validation
- `sprint:3` - First Improvement Cycle + Safety

---

## üìä Effort Estimates

- **S (Small)**: 1-2 days (1 issue)
- **M (Medium)**: 3-5 days (17 issues)
- **L (Large)**: 1-2 weeks (5 issues)
- **XL (Extra Large)**: 2+ weeks (0 issues - all broken down)

**Total Sprint 1 Effort**: ~8-10 weeks serial, ~2-3 weeks with 3-agent parallel execution

---

## üéØ Next Steps

1. Review and approve this breakdown
2. Create GitHub issues using `gh` CLI or web interface
3. Assign initial issues to agents based on domain expertise
4. Set up GitHub Project board with Sprint columns
5. Begin Sprint 1 execution

---

**Generated by**: Tri-Agent System (Claude + Codex + Gemini)
**Validation Status**: ‚úÖ Codex GPT-5.1-Codex-Max | ‚úÖ Gemini 2.5 Pro
**Ready for**: GitHub issue creation and Sprint kickoff
